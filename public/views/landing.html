<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose a Service</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="landing-page">
    <header class="landing-banner">
        <div class="landing-banner__logo">
            <img src="../images/seco-logo.png" alt="SECO Energy Logo" class="logo" />
        </div>
        <div class="landing-banner__content">
            <h1>Service Portal</h1>
            <p class="lede">Submit a ticket for IT, facilities, electrical, moves, or warehouse. Technicians can access the staff portal.</p>
        </div>
    </header>

    <div class="landing-intro">
        <h2>What can we help you with today?</h2>
    </div>

    <div id="landing-user-info" class="landing-user-info" style="display:none;">
        <p>Logged in as: <strong id="landing-user-name"></strong></p>
        <button id="landing-logout-btn">Sign Out</button>
    </div>

    <main class="landing-grid">
        <a class="landing-card" href="./customer/customer-it.html">
            <div class="landing-card__icon">üíª</div>
            <h3>Information Technology</h3>
            <p>Accounts, devices, software, network, phones.</p>
            <span class="landing-card__cta">Submit IT ticket ‚Üí</span>
        </a>
        <a class="landing-card" href="./customer/customer-buildings.html">
            <div class="landing-card__icon">üè¢</div>
            <h3>Buildings &amp; Grounds</h3>
            <p>HVAC, plumbing, carpentry, grounds, custodial.</p>
            <span class="landing-card__cta">Submit Facilities ticket ‚Üí</span>
        </a>
        <a class="landing-card" href="./customer/customer-electrical.html">
            <div class="landing-card__icon">‚ö°</div>
            <h3>Electrical Services</h3>
            <p>Power, lighting, panels, safety, generators.</p>
            <span class="landing-card__cta">Submit Electrical ticket ‚Üí</span>
        </a>
        <a class="landing-card" href="./customer/customer-moves.html">
            <div class="landing-card__icon">üì¶</div>
            <h3>Move Request</h3>
            <p>Office moves, furniture, IT equipment relocation.</p>
            <span class="landing-card__cta">Submit Move request ‚Üí</span>
        </a>
        <a class="landing-card" href="./customer/customer-rma.html">
            <div class="landing-card__icon">üîÑ</div>
            <h3>RMA / Warehouse</h3>
            <p>Returns, exchanges, parts requests, inventory.</p>
            <span class="landing-card__cta">Submit RMA request ‚Üí</span>
        </a>
        <a class="landing-card landing-card--tech" href="./tech-login.html">
            <div class="landing-card__icon">üõ†Ô∏è</div>
            <h3>Staff Portal</h3>
            <p>For technicians and administrators only.</p>
            <span class="landing-card__cta">Staff login ‚Üí</span>
        </a>
    </main>

    <script>
        // Check if customer is logged in
        const customerAuthToken = localStorage.getItem('customerAuthToken');
        const customerInfo = localStorage.getItem('customerInfo');
        
        if (!customerAuthToken || !customerInfo) {
            // Redirect to login if not logged in
            localStorage.removeItem('customerAuthToken');
            localStorage.removeItem('customerInfo');
            window.location.href = './index.html';
        } else {
            // Show user info
            try {
                const info = JSON.parse(customerInfo);
                const userInfoDiv = document.getElementById('landing-user-info');
                const userNameSpan = document.getElementById('landing-user-name');
                if (userInfoDiv && userNameSpan) {
                    userNameSpan.textContent = info.name || info.username;
                    userInfoDiv.style.display = 'block';
                }
            } catch (e) {
                console.error('Error parsing customer info:', e);
                localStorage.removeItem('customerAuthToken');
                localStorage.removeItem('customerInfo');
                window.location.href = './index.html';
            }

            // Handle logout
            const logoutBtn = document.getElementById('landing-logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    // Clear customer tokens
                    localStorage.removeItem('customerAuthToken');
                    localStorage.removeItem('customerInfo');
                    // Redirect to customer login page
                    window.location.href = './index.html';
                });
            }
        }
    </script>
</body>
</html>
